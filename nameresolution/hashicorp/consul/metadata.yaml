# yaml-language-server: $schema=../../../component-metadata-schema.json
schemaVersion: v1
type: nameresolution
name: hashicorp.consul
version: v1
status: alpha
title: "HashiCorp Consul"
urls:
  - title: Reference
    url: https://docs.dapr.io/reference/components-reference/supported-name-resolution/setup-nr-consul/
authenticationProfiles:
  - title: "Token Authentication"
    description: "Connect to Consul using a token for authentication."
    metadata:
      - name: token
        type: string
        required: true
        description: The Consul ACL token for authentication.
        sensitive: true
        example: "consul-token"
  - title: "Username/Password Authentication"
    description: "Connect to Consul using a username and password."
    metadata:
      - name: username
        type: string
        required: false
        description: Username for HTTP basic authentication.
        example: "username"
      - name: password
        type: string
        required: false
        description: Password for HTTP basic authentication.
        sensitive: true
        example: "password"
  - title: "TLS Authentication"
    description: "Connect to Consul using TLS encryption with certificates."
    metadata:
      - name: tlsAddress
        type: string
        required: true
        description: The TLS address of the Consul server.
        example: "localhost:8501"
      - name: caFile
        type: string
        required: true
        description: Path to the CA certificate file.
        example: "/path/to/ca.crt"
      - name: certFile
        type: string
        required: true
        description: Path to the client certificate file.
        example: "/path/to/client.crt"
      - name: keyFile
        type: string
        required: true
        description: Path to the client private key file.
        example: "/path/to/client.key"
      - name: insecureSkipVerify
        type: bool
        required: false
        description: Skip TLS certificate verification.
        example: "false"
        default: "false"
metadata:
  - name: address
    type: string
    required: true
    description: The address of the Consul server.
    example: "localhost:8500"
  - name: scheme
    type: string
    required: false
    description: The scheme to use for connecting to Consul (http or https).
    example: "https"
    default: "http"
  - name: datacenter
    type: string
    required: false
    description: The Consul datacenter to use.
    example: "dc1"
  - name: waitTime
    type: string
    required: false
    description: The wait time for Consul operations.
    example: "10s"
  - name: tokenFile
    type: string
    required: false
    description: Path to a file containing the Consul ACL token.
    example: "/path/to/token"
  - name: daprPortMetaKey
    type: string
    required: false
    description: The metadata key used to store the Dapr port.
    example: "DAPR_PORT"
    default: "DAPR_PORT"
  - name: selfRegister
    type: bool
    required: false
    description: Whether to register this service with Consul.
    example: "true"
    default: "false"
  - name: selfDeregister
    type: bool
    required: false
    description: Whether to deregister this service from Consul on shutdown.
    example: "true"
    default: "false"
  - name: useCache
    type: bool
    required: false
    description: Whether to use caching for service lookups.
    example: "true"
    default: "false"
  - name: tags
    type: string
    required: false
    description: Tags to associate with the service registration.
    example: "dapr,v1"
  - name: namespace
    type: string
    required: false
    description: The Consul namespace to use for queries.
    example: "default"
  - name: partition
    type: string
    required: false
    description: The Consul partition to use for queries.
    example: "default"
  - name: queryDatacenter
    type: string
    required: false
    description: The Consul datacenter to use for queries.
    example: "dc1"
  - name: queryToken
    type: string
    required: false
    description: The Consul ACL token to use for queries.
    sensitive: true
    example: "query-token"
  - name: queryWaitTime
    type: string
    required: false
    description: The wait time for Consul queries.
    example: "5s"
  - name: allowStale
    type: bool
    required: false
    description: Whether to allow stale results in queries.
    example: "true"
    default: "false"
  - name: requireConsistent
    type: bool
    required: false
    description: Whether to require consistent reads in queries.
    example: "false"
    default: "false"