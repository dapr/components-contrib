# yaml-language-server: $schema=../../../component-metadata-schema.json
schemaVersion: v1
type: state
name: aws.dynamodb
version: v1
status: stable
title: "AWS DynamoDB"
urls:
  - title: Reference
    url: https://docs.dapr.io/reference/components-reference/supported-state-stores/setup-dynamodb/
capabilities:
  - crud
  - transactional
  - etag
  - ttl
authenticationProfiles:
  - title: "AccessKey and secretKey"
    description: "Authenticate using accessKey and secretKey."
    metadata:
      - name: accessKey
        type: string
        required: false
        sensitive: true
        description: |
          ID of the AWS account with appropriate permissions to SNS and SQS.
          Can be secretKeyRef to use a secret reference.
        example:  "AKIAIOSFODNN7EXAMPLE"
        default: ""
      - name: secretKey
        type: string
        required: false
        sensitive: true
        description: |
          Secret for the AWS user. Can be secretKeyRef to use a secret 
          reference.
        example:  "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
        default: ""
metadata:
  - name: table
    required: true
    description: |
      The name of the DynamoDB table to use.
    example: '"Contracts"'
    type: string
  - name: region
    required: false
    description: |
      The AWS region to the instance. See this page for valid regions:
      https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html. 
      Ensure that DynamoDB are available in that region.
    example: '"us-east-1"'
    type: string
  - name: endpoint
    required: false
    description: |
      AWS endpoint for the component to use. Only used for local development. 
      The endpoint is unncessary when running against production AWS.
    example: '"http://localhost:4566"'
    type: string
  - name: sessionToken
    required: false
    sensitive: true
    description: |
      AWS session token to use. A session token is only required if you are using 
      temporary security credentials.
    example: '"TOKEN"'
    type: string
  - name: ttlAttributeName
    required: false
    description: |
      The table attribute name which should be used for TTL.
    example: '"expiresAt"'
    type: string
  - name: partitionKey
    required: false
    description: |
      The table primary key or partition key attribute name. 
      This field is used to replace the default primary key attribute name "key". 
      See the section:
      https://docs.dapr.io/reference/components-reference/supported-state-stores/setup-dynamodb/#partition-keys.
    example: '"ContractID"'
    type: string
 