# yaml-language-server: $schema=../../component-metadata-schema.json
schemaVersion: v1
type: bindings
name: kafka
version: v1
status: stable
title: "Apache Kafka"
urls:
  - title: Reference
    url: https://docs.dapr.io/reference/components-reference/supported-bindings/kafka/
binding:
  output: true
  input: true
  operations:
    - name: create
      description: "Publish a new message in the topic."
capabilities: []
metadata:
  - name: topics
    type: string
    description: |
      A comma-separated string of topics.
    example: '"mytopic1,topic2"'
    binding:
      input: true
  - name: brokers
    type: string
    required: true
    description: |
      A comma-separated list of Kafka brokers.
    example: '"localhost:9092,dapr-kafka.myapp.svc.cluster.local:9093"'
    binding:
      output: true
      input: true
  - name: publishTopic
    type: string
    required: true
    description: |
      The topic to publish to.
    example: '"mytopic"'
    binding:
      output: true
  - name: consumerGroup
    type: string
    description: |
      A kafka consumer group to listen on. Each record published
      to a topic is delivered to one consumer within each consumer
      group subscribed to the topic.
    example: '"group1"'
    binding:
      input: true
  - name: clientID
    type: string
    description: |
      A user-provided string sent with every request to 
      the Kafka brokers for logging, debugging, and auditing purposes.
    example: '"my-dapr-app"'
    binding:
      output: true
      input: true
  - name: authRequired
    type: bool
    description: |
     (Deprecated) Enable SASL authentication with the Kafka brokers.
    example: '"false"'
    binding:
      output: true
      input: true
  - name: authType
    type: string
    required: true
    description: | 
      Configure or disable authentication. 
      Supported values: "none", "password", "mtls", or "oidc".
    example: '"none"'
    binding:
      output: true
      input: true
  - name: saslUsername
    type: string
    description: |
      The SASL username used for authentication. 
      Only required if authType is set to "password".
    example: '"myuser"'
    binding:
      output: true
      input: true
  - name: saslPassword
    type: string
    senstive: true
    description: |
      The SASL password used for authentication. 
      Can be secretKeyRef to use a secret reference. 
      Only required if authType is set to "password".
    example: '"mypassword"'
    binding:
      output: true
      input: true
  - name: saslMechanism
    type: string
    description: |
      The SASL Authentication Mechanism you wish to use. 
      Only required if authType is set to "password".
    example: '"SHA-512"'
    default: '"PLAINTEXT"'
    binding:
      output: true
      input: true
  - name: initialOffset
    type: string
    description: |
      The initial offset to use if no offset was previously committed.
      Should be "newest" or "oldest".
    example: '"oldest"'
    default: '"newest", "oldest"'
    binding:
      input: true
  - name: maxMessageBytes
    type: number
    description: |
      The maximum size in bytes allowed for a single Kafka message.
    example: '2048'
    default: '1024'
    binding:
      output: true
      input: true
  - name: consumeRetryInterval
    type: duration
    description: |
      The interval between retries when attempting to consume topics.
      Treats numbers without suffix as milliseconds.
    example: '"200ms"'
    default: '"100ms"'
    binding:
      output: true
      input: true
  - name: consumeRetryEnabled
    type: bool
    description: |
      Disables consumer retry by setting this to "false".
    example: '"true"'
    binding:
      output: true
      input: true
  - name: version
    type: string
    description: |
      Kafka cluster version.
    example: '"0.10.2.0"'
    default: '"2.0.0.0"'
    binding:
      output: true
      input: true
  - name: caCert
    type: string
    description: |
      Certificate authority certificate, required for using TLS. 
      Can be secretKeyRef to use a secret reference".
    example: '"-----BEGIN CERTIFICATE-----\n<base64-encoded DER>\n-----END CERTIFICATE-----"'
    binding:
      output: true
      input: true
  - name: clientCert
    type: string
    description: |
      Client certificate, required for authType mtls. 
      Can be secretKeyRef to use a secret reference.
    example: '"-----BEGIN CERTIFICATE-----\n<base64-encoded DER>\n-----END CERTIFICATE-----"'
    binding:
      output: true
      input: true
  - name: clientKey
    type: string
    description: |
      Client key, required for authType mtls.
      Can be secretKeyRef to use a secret reference.
    example: '"-----BEGIN RSA PRIVATE KEY-----\n<base64-encoded DER>\n-----END RSA PRIVATE KEY-----"'
    binding:
      output: true
      input: true
  - name: skipVerify
    type: bool
    description: |
      Skip TLS verification, this is not recommended for use in production.
    example: '"true"'
    default: '"false"'
    binding:
      output: true
      input: true
  - name: disableTls
    type: bool
    description: |
      Disable TLS for transport security. 
      This is not recommended for use in production. 
      The value "false" implies TLS is enabled.
    example: '"true"'
    default: '"false"'
    binding:
      output: true
      input: true
  - name: oidcTokenEndpoint
    type: string
    description: |
      Full URL to an OAuth2 identity provider access token endpoint. 
      Required when authType is set to oidc.
    example: '"https://identity.example.com/v1/token"'
    binding:
      output: true
      input: true
  - name: oidcClientID
    description: |
      The OAuth2 client ID that has been provisioned in the identity provider. 
      Required when authType is set to oidc.
    example: '"dapr-kafka"'
    type: string
    binding:
      output: true
      input: true
  - name: oidcClientSecret
    type: string
    sensitive: true
    description: |
      The OAuth2 client secret that has been provisioned in the identity provider.
      Required when authType is set to oidc.
    example: '"KeFg23!"'
    binding:
      output: true
      input: true
  - name: oidcScopes
    type: string
    description: |
      Comma-delimited list of OAuth2/OIDC scopes to request with the access token.
      Recommended when authType is set to oidc.
    example: '"openid,kafka-prod"'
    default: '"openid"'
    binding:
      output: true
      input: true