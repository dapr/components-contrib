# yaml-language-server: $schema=../../../../component-metadata-schema.json
schemaVersion: v1
type: bindings
name: cloudflare.queues
version: v1
status: alpha
title: Cloudflare Queues
description: |
  Binding for Cloudflare Queues, a durable and distributed messaging platform
  for high-volume message queueing built on Cloudflare Workers.
urls:
  - title: Reference
    url: https://docs.dapr.io/reference/components-reference/supported-bindings/
  - title: Cloudflare Queues
    url: https://developers.cloudflare.com/queues/

metadata:
  - name: queueName
    description: |
      Name of the Cloudflare Queue to use.
    type: string
    required: true
    example: "my-dapr-queue"

  - name: workerUrl
    description: |
      URL to a pre-deployed Cloudflare Worker. Either this or the combination
      of cfAPIToken and cfAccountID is required.
    type: string
    required: false
    example: "https://dapr-worker.username.workers.dev/"

  - name: cfAPIToken
    description: |
      Cloudflare API token with appropriate permissions. Required when not using workerUrl.
    type: string
    required: false
    sensitive: true
    example: "glj0dHJjN42xKXZoPDxLZrHVMzi6RKpvr-eid7mO"

  - name: cfAccountID
    description: |
      Cloudflare account ID. Required when not using workerUrl.
    type: string
    required: false
    example: "a1b2c3d4e5f6g7h8i9j0"

  - name: key
    description: |
      Ed25519 private key in PEM-encoded PKCS#8 format used for request authentication.
    type: string
    required: true
    sensitive: true
    example: |
      -----BEGIN PRIVATE KEY-----
      MC4CAQAwBQYDK2VwBCIEILTkxlV3wkZUbMDqUqBgdEGauHBDEwmRafH2JKnC0sId
      -----END PRIVATE KEY-----

  - name: workerName
    description: |
      Name of the Cloudflare Worker.
    type: string
    required: true
    example: "dapr-queues-binding"

  - name: timeoutInSeconds
    description: |
      Timeout for network requests in seconds.
    type: number
    required: false
    default: "20"
    example: "30"