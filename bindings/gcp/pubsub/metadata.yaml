# yaml-language-server: $schema=../../../component-metadata-schema.json
schemaVersion: v1
type: bindings
name: gcp.pubsub
version: v1
status: alpha
title: "Google Cloud Pub/Sub"
urls:
  - title: Reference
    url: https://docs.dapr.io/reference/components-reference/supported-bindings/pubsub/
binding:
  output: true
  input: true
  operations:
    - name: create
      description: "Publish message to Pub/Sub topic"
    - name: read
      description: "Receive messages from Pub/Sub subscription"
builtinAuthenticationProfiles:
  - name: "gcp"
authenticationProfiles:
  - title: "Service Account Authentication"
    description: "Authenticate using a GCP service account JSON key."
    metadata:
      - name: projectID
        type: string
        required: true
        description: The GCP project ID.
        example: "my-project"
      - name: privateKeyID
        type: string
        required: true
        description: The private key ID from the service account JSON.
        example: "abc123def456"
      - name: privateKey
        type: string
        required: true
        description: The private key from the service account JSON.
        example: |
          -----BEGIN PRIVATE KEY-----
          XXX
          -----END PRIVATE KEY-----
      - name: clientEmail
        type: string
        required: true
        description: The client email from the service account JSON.
        example: "pubsub@my-project.iam.gserviceaccount.com"
      - name: clientID
        type: string
        required: true
        description: The client ID from the service account JSON.
        example: "123456789012345678901"
      - name: authURI
        type: string
        required: true
        description: The authentication URI from the service account JSON.
        example: "https://accounts.google.com/o/oauth2/auth"
      - name: tokenURI
        type: string
        required: true
        description: The token URI from the service account JSON.
        example: "https://oauth2.googleapis.com/token"
      - name: authProviderX509CertURL
        type: string
        required: true
        description: The auth provider certificate URL from the service account JSON.
        example: "https://www.googleapis.com/oauth2/v1/certs"
      - name: clientX509CertURL
        type: string
        required: true
        description: The client certificate URL from the service account JSON.
        example: "https://www.googleapis.com/robot/v1/metadata/x509/pubsub%40my-project.iam.gserviceaccount.com"
metadata:
  - name: topic
    required: true
    description: "The Pub/Sub topic name"
    example: '"my-topic"'
  - name: subscription
    required: false
    description: "The Pub/Sub subscription name"
    example: '"my-subscription"'
  - name: Type
    required: false
    description: "The type of service account"
    example: '"service_account"'
  - name: PrivateKey
    required: false
    description: "The private key for service account authentication"
    example: '"-----BEGIN PRIVATE KEY-----\nXXX..."'
    sensitive: true
  - name: TokenURI
    required: false
    description: "The token URI for authentication"
    example: '"https://oauth2.googleapis.com/token"'
  - name: AuthProviderX509CertURL
    required: false
    description: "The auth provider X509 certificate URL"
    example: '"https://www.googleapis.com/oauth2/v1/certs"'
  - name: ProjectID
    required: false
    description: "The GCP project ID"
    example: '"my-project-id"'
  - name: PrivateKeyID
    required: false
    description: "The private key ID"
    example: '"key-id"'
  - name: ClientEmail
    required: false
    description: "The client email for service account"
    example: '"service-account@my-project.iam.gserviceaccount.com"'
  - name: ClientID
    required: false
    description: "The client ID"
    example: '"client-id"'
  - name: AuthURI
    required: false
    description: "The auth URI"
    example: '"https://accounts.google.com/o/oauth2/auth"'
  - name: ClientX509CertURL
    required: false
    description: "The client X509 certificate URL"
    example: '"https://www.googleapis.com/robot/v1/metadata/x509/service-account%40my-project.iam.gserviceaccount.com"'